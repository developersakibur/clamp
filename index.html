<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>clamp() Generator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      width: 400px;
      background: #1a1a1a;
      color: #e5e5e5;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      padding: 20px;
    }

    .header {
      margin-bottom: 20px;
    }

    .header h1 {
      font-size: 20px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 4px;
    }

    .header p {
      font-size: 13px;
      color: #888;
    }

    .input-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 16px;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .input-group label {
      font-size: 12px;
      color: #aaa;
      font-weight: 500;
    }

    .input-group input {
      background: #2a2a2a;
      border: 1px solid #3a3a3a;
      border-radius: 6px;
      padding: 10px 12px;
      font-size: 14px;
      color: #fff;
      transition: all 0.2s;
    }

    .input-group input:focus {
      outline: none;
      border-color: #4a9eff;
      background: #2d2d2d;
    }

    .input-group input:hover {
      border-color: #4a4a4a;
    }

    .radio-section {
      margin-bottom: 16px;
    }

    .radio-label {
      font-size: 12px;
      color: #aaa;
      font-weight: 500;
      display: block;
      margin-bottom: 8px;
    }

    .radio-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }

    .radio-option {
      position: relative;
    }

    .radio-option input[type="radio"] {
      position: absolute;
      opacity: 0;
      width: 0;
      height: 0;
    }

    .radio-option label {
      display: block;
      background: #2a2a2a;
      border: 1px solid #3a3a3a;
      border-radius: 6px;
      padding: 10px 8px;
      text-align: center;
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
      user-select: none;
    }

    .radio-option label:hover {
      border-color: #4a4a4a;
      background: #2d2d2d;
    }

    .radio-option input[type="radio"]:checked + label {
      background: #4a9eff;
      border-color: #4a9eff;
      color: #fff;
      font-weight: 500;
    }

    .output-section {
      margin-bottom: 16px;
    }

    .output-label {
      font-size: 12px;
      color: #aaa;
      font-weight: 500;
      display: block;
      margin-bottom: 8px;
    }

    .clamp-output {
      background: #2a2a2a;
      border: 1px solid #3a3a3a;
      border-radius: 6px;
      padding: 16px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      color: #fff;
      cursor: pointer;
      transition: all 0.2s;
      word-break: break-all;
      min-height: 52px;
      display: flex;
      align-items: center;
    }

    .clamp-output:hover {
      border-color: #4a4a4a;
      background: #2d2d2d;
    }

    .clamp-output.copied {
      background: #22c55e;
      border-color: #22c55e;
      color: #fff;
    }

    .error-message {
      color: #ef4444;
    }

    .footer-note {
      font-size: 11px;
      color: #666;
      line-height: 1.5;
      padding-top: 12px;
      border-top: 1px solid #2a2a2a;
    }

    .footer-note strong {
      color: #888;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>clamp() Generator</h1>
    <p>Fluid responsive values</p>
  </div>

  <div class="input-grid">
    <div class="input-group">
      <label>Min Viewport (px)</label>
      <input id="minVW" type="number" value="320">
    </div>
    <div class="input-group">
      <label>Max Viewport (px)</label>
      <input id="maxVW" type="number" value="1440">
    </div>
    <div class="input-group">
      <label>Min Value (px)</label>
      <input id="minSize" type="number" value="32" min="0">
    </div>
    <div class="input-group">
      <label>Max Value (px)</label>
      <input id="maxSize" type="number" value="48" min="10">
    </div>
  </div>

  <div class="radio-section">
    <span class="radio-label">Property Type</span>
    <div class="radio-grid">
      <div class="radio-option">
        <input type="radio" name="propertyType" id="radioFont" value="font" checked>
        <label for="radioFont">Font</label>
      </div>
      <div class="radio-option">
        <input type="radio" name="propertyType" id="radioPadding" value="padding">
        <label for="radioPadding">Padding</label>
      </div>
      <div class="radio-option">
        <input type="radio" name="propertyType" id="radioMargin" value="margin">
        <label for="radioMargin">Margin</label>
      </div>
      <div class="radio-option">
        <input type="radio" name="propertyType" id="radioGap" value="gap">
        <label for="radioGap">Gap</label>
      </div>
    </div>
  </div>

  <div class="output-section">
    <span class="output-label">CSS Output (Click to Copy)</span>
    <div id="result" class="clamp-output"></div>
  </div>

  <div class="footer-note">
    <strong>Tip:</strong> Values auto-adjust based on property type. Change Max Value or Property Type to see different scaling ratios optimized for each use case.
  </div>

  <script>
    const minVWEl = document.getElementById('minVW');
    const maxVWEl = document.getElementById('maxVW');
    const minSizeEl = document.getElementById('minSize');
    const maxSizeEl = document.getElementById('maxSize');
    const resultEl = document.getElementById('result');
    const radioButtons = document.querySelectorAll('input[name="propertyType"]');

    let currentClampValue = '';

    // Context-aware reduction rules
    function getMobileSize(desktopPx, propertyType) {
      const minSize = 10;
      let multiplier;
      
      switch(propertyType) {
        case 'font':
          if (desktopPx >= 60) multiplier = 0.60;
          else if (desktopPx >= 40) multiplier = 0.70;
          else if (desktopPx >= 30) multiplier = 0.75;
          else if (desktopPx >= 20) multiplier = 0.80;
          else if (desktopPx >= 16) multiplier = 0.90;
          else multiplier = 0.95;
          break;
          
        case 'padding':
          if (desktopPx >= 64) multiplier = 0.65;
          else if (desktopPx >= 48) multiplier = 0.70;
          else if (desktopPx >= 32) multiplier = 0.75;
          else if (desktopPx >= 24) multiplier = 0.80;
          else if (desktopPx >= 16) multiplier = 0.85;
          else multiplier = 0.90;
          break;
          
        case 'margin':
          if (desktopPx >= 64) multiplier = 0.60;
          else if (desktopPx >= 48) multiplier = 0.65;
          else if (desktopPx >= 32) multiplier = 0.70;
          else if (desktopPx >= 24) multiplier = 0.75;
          else if (desktopPx >= 16) multiplier = 0.80;
          else multiplier = 0.85;
          break;
          
        case 'gap':
          if (desktopPx >= 64) multiplier = 0.70;
          else if (desktopPx >= 48) multiplier = 0.75;
          else if (desktopPx >= 32) multiplier = 0.80;
          else if (desktopPx >= 24) multiplier = 0.85;
          else if (desktopPx >= 16) multiplier = 0.90;
          else multiplier = 0.95;
          break;
      }
      
      const mobileSize = Math.round(desktopPx * multiplier);
      return Math.max(mobileSize, minSize);
    }

    function updateMinSize() {
      const maxPx = +maxSizeEl.value;
      const selectedProperty = document.querySelector('input[name="propertyType"]:checked').value;
      
      if (maxPx && maxPx > 0) {
        const calculatedMin = getMobileSize(maxPx, selectedProperty);
        minSizeEl.value = calculatedMin;
      }
      
      updateClamp();
    }

    function updateClamp() {
      const minVW = +minVWEl.value;
      const maxVW = +maxVWEl.value;
      const minPx = +minSizeEl.value;
      const maxPx = +maxSizeEl.value;

      // Reset green background when generating new clamp
      resultEl.classList.remove('copied');

      if (!minVW || !maxVW || !minPx || !maxPx) {
        return;
      }

      if (minVW >= maxVW || minPx >= maxPx) {
        resultEl.innerHTML = '<span class="error-message">Invalid: Min must be < Max</span>';
        currentClampValue = '';
        return;
      }

      const slope = (maxPx - minPx) / (maxVW - minVW);
      const vwVal = (slope * 100).toFixed(2);
      const interceptPx = minPx - slope * minVW;

      const minRem = (minPx / 16).toFixed(2);
      const maxRem = (maxPx / 16).toFixed(2);
      const interceptRem = (interceptPx / 16).toFixed(2);

      currentClampValue = `clamp(${minRem}rem, ${interceptRem}rem + ${vwVal}vw, ${maxRem}rem)`;
      resultEl.textContent = currentClampValue;
    }

    function copyClamp() {
      if (!currentClampValue) return;
      
      navigator.clipboard.writeText(currentClampValue).then(() => {
        resultEl.classList.add('copied');
      });
    }

    // Event listeners
    minVWEl.addEventListener('input', updateClamp);
    maxVWEl.addEventListener('input', updateClamp);
    minSizeEl.addEventListener('input', updateClamp);
    maxSizeEl.addEventListener('input', updateMinSize);
    radioButtons.forEach(radio => radio.addEventListener('change', updateMinSize));
    resultEl.addEventListener('click', copyClamp);

    // Initial render
    updateClamp();
  </script>
</body>
</html>